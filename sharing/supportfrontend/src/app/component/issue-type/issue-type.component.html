<app-nav-main
  [showAddButton]="true"
  (openAddModal)="openAddIssueModal()"
  (searchChange)="onSearchChange($event)"
></app-nav-main>

<app-add-issue
  (issueAdded)="onIssueAdded($event)"
  (issueUpdated)="onIssueUpdated($event)"
  #addIssue
></app-add-issue>

<div class="issue-type">
  <div class="issue-type-header">
    <h2>Issue Type</h2>
  </div>

  <div class="issue-table">
    <table>
      <thead>
        <tr>
          <th>Id</th>
          <th>Type</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let issue of Issues">
          <td>{{ issue.Id }}</td>
          <td>{{ issue.Issue_Type }}</td>
          <td>
            <button class="edit-btn" (click)="editIssue(issue)" title="Edit">
              <!-- SVG icon for edit -->
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M20.15 7.94L8.28 19.81C7.22 20.88 4.05 21.37 3.33 20.66 2.61 19.95 3.12 16.78 4.18 15.71L16.05 3.84C16.6 3.32 17.33 3.03 18.08 3.04 18.84 3.05 19.57 3.35 20.1 3.89 20.64 4.42 20.94 5.15 20.95 5.9 20.96 6.66 20.67 7.39 20.15 7.94Z"
                  stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </button>

            <button class="delete-btn" (click)="deleteIssue(issue.Id)" title="Delete">
              <!-- SVG icon for delete -->
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M4 7H20" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M6 10L7.7 19.36C7.87 20.31 8.7 21 9.67 21H14.33C15.3 21 16.13 20.31 16.3 19.36L18 10"
                  stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9 5C9 3.9 9.9 3 11 3H13C14.1 3 15 3.9 15 5V7H9V5Z" stroke="#000" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages > 1" class="pagination-nav">
    <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>

    <button
      *ngFor="let page of pages"
      (click)="changePage(page)"
      [class.active]="currentPage === page"
    >
      {{ page }}
    </button>

    <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
  </nav>
</div>
